(function(global,factory){if('function'==typeof define&&define.amd)define(['module','exports','lodash/forEach','lodash/map','lodash/isArray','lodash/bind','lodash/partial','./close_info','./markers'],factory);else if('undefined'!=typeof exports)factory(module,exports,require('lodash/forEach'),require('lodash/map'),require('lodash/isArray'),require('lodash/bind'),require('lodash/partial'),require('./close_info'),require('./markers'));else{var mod={exports:{}};factory(mod,mod.exports,global.forEach,global.map,global.isArray,global.bind,global.partial,global.close_info,global.markers),global.create_map=mod.exports}})(this,function(module,exports,_forEach2,_map2,_isArray2,_bind,_partial,_close_info,_markers){'use strict';function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function makeMarker(createMarker,closer){return function(mk){var marker=createMarker(mk);return closer.addMarkers(marker),marker}}function creator(markers,create){return markers=(0,_isArray3.default)(markers)?(0,_map3.default)(markers,function(mk){return create(mk)}):[create(markers)],markers}function centerMap(map,markers,LatLngBounds){var bounds=new LatLngBounds;return(0,_forEach3.default)(markers,function(mk){bounds.extend(mk.marker.getPosition())}),map.fitBounds(bounds),this.obj}function setZoom(map,zoom,event){var listener=event.addListener(map,'idle',function(){this.getZoom()!==zoom&&this.setZoom(zoom),event.removeListener(listener)});return this.obj}Object.defineProperty(exports,'__esModule',{value:!0});var _forEach3=_interopRequireDefault(_forEach2),_map3=_interopRequireDefault(_map2),_isArray3=_interopRequireDefault(_isArray2),_bind2=_interopRequireDefault(_bind),_partial2=_interopRequireDefault(_partial),_close_info2=_interopRequireDefault(_close_info),_markers2=_interopRequireDefault(_markers);exports.default=function(el){var map,markers;return function(Map,options){map=new Map(el,options.getAll());var closer=(0,_close_info2.default)(map),create=makeMarker((0,_markers2.default)(map,closer),closer);markers=creator(options.get('pins'),create);var obj={getMap:function getMap(){return map},setPosition:function setPosition(LatLng){var pos=LatLng({lat:options.get('lat'),lng:options.get('lng')});map.setCenter(pos)}};return obj.centerMap=(0,_partial2.default)((0,_bind2.default)(centerMap,{obj:obj}),map,markers),obj.setZoom=(0,_partial2.default)((0,_bind2.default)(setZoom,{obj:obj}),map,options.get('zoom')),obj}},module.exports=exports['default']});