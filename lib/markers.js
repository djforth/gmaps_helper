(function(global,factory){if('function'==typeof define&&define.amd)define(['module','exports','lodash/isFunction','lodash/isObject','./info_windows','./open_close'],factory);else if('undefined'!=typeof exports)factory(module,exports,require('lodash/isFunction'),require('lodash/isObject'),require('./info_windows'),require('./open_close'));else{var mod={exports:{}};factory(mod,mod.exports,global.isFunction,global.isObject,global.info_windows,global.open_close),global.markers=mod.exports}})(this,function(module,exports,_isFunction2,_isObject2,_info_windows,_open_close){'use strict';function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function setIcon(marker,icon){!(0,_isObject3.default)(marker)||!(0,_isFunction3.default)(marker.setIcon)||icon.picture&&icon.width&&icon.height&&marker.setIcon(icon.picture,[icon.width,icon.height])}Object.defineProperty(exports,'__esModule',{value:!0});var _isFunction3=_interopRequireDefault(_isFunction2),_isObject3=_interopRequireDefault(_isObject2),_info_windows2=_interopRequireDefault(_info_windows),_open_close2=_interopRequireDefault(_open_close);exports.default=function(map,closer,opts){return function(mk){var marker=new google.maps.Marker({position:new google.maps.LatLng(mk.lat,mk.lng),map:map});setIcon(marker,mk);var infoWindow=(0,_info_windows2.default)(map,mk.infowindow,opts);if(mk.infowindow){var infoActions=(0,_open_close2.default)(map,mk.id,closer);infoActions(marker,infoWindow)}return{marker:marker,info:infoWindow}}},module.exports=exports['default']});